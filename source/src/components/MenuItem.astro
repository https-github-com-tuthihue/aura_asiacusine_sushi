---
import type { IFood } from "../libs/types";

interface Props {
  item: IFood;
  isVisible?: boolean;
}

const { item, isVisible = true } = Astro.props;
---

<div
  data-category={item.category}
  class={`menu-item bg-gray-900 rounded-2xl p-5 border border-gray-800 ${
    !isVisible ? "hidden" : ""
  }`}
>
  <div class="flex justify-between items-start mb-2">
    <h3 class="text-white text-[17px] font-bold relative">
      {item.id}. {item.name}
      {
        item.allergieCode ? (
          <sup class="text-xs text-yellow-600 absolute align-super -top-1 right-0 translate-x-[120%]  flex items-center">
            {item.allergieCode}
            <img
              src="/veget.png"
              alt="Vegetarian"
              class="inline w-3 h-3 ml-0.5 -mt-0.5"
            />
          </sup>
        ) : null
      }
    </h3>
  </div>

  {
    item.description && (
      <p class="text-gray-400 text-sm leading-relaxed mb-4">
        {item.description}
      </p>
    )
  }
  {
    item.toppings?.length == 0 && (
      <div class="text-yellow-500 -mt-2 w-full text-right text-xl font-bold whitespace-nowrap ">
        {item.price || item.upgratedPrice}€
      </div>
    )
  }
  {
    item.toppings && item.toppings.length > 0 && (
      <div class="space-y-2">
        {item.topping?.name && (
          <div class="flex justify-between items-center">
            <span class="text-white text-[14px]">
              {item.topping.name}
              {item.topping.allergieCode ? (
                <sup class="text-xs text-yellow-600 align-super ml-1">
                  {item.topping.allergieCode}
                </sup>
              ) : null}
            </span>

            <div class="flex gap-3">
              {item.topping.price && (
                <span class="text-yellow-500 font-bold w-10 text-right">
                  {item.topping.price}€
                </span>
              )}
              {item.topping.upgratedPrice && (
                <span class="text-yellow-500 font-bold w-10 text-right">
                  {item.topping.upgratedPrice}€
                </span>
              )}
            </div>
          </div>
        )}
        {item.toppings.map((option) => (
          <div class="flex justify-between items-center">
            <span class="text-white text-[14px]">{option.name}</span>
            <div class="flex gap-3">
              {option.upgratedPrice && (
                <span class="text-yellow-500 font-bold">
                  {option.upgratedPrice}€
                </span>
              )}
            </div>
          </div>
        ))}
      </div>
    )
  }
</div>
